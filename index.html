<html><head><base href="https://leno.live/"><title>Leno - A Fresh Social Experience</title>
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #FFEBEB;
    color: #333;
    margin: 0;
    padding: 0;
}
.header {
    background-color: #FF0000;
    color: #FFFF00;
    padding: 10px 0;
    text-align: center;
}
.nav {
    background-color: #FF3333;
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.nav a, .nav button {
    color: #FFFF00;
    text-decoration: none;
    margin: 0 10px;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 16px;
}
.content {
    padding: 20px;
    max-width: 800px;
    margin: 0 auto;
}
.button {
    background-color: #FF0000;
    color: #FFFF00;
    border: none;
    padding: 10px 20px;
    margin: 10px;
    cursor: pointer;
    font-weight: bold;
}
.user-menu {
    position: relative;
    display: inline-block;
}
.user-menu-content {
    display: none;
    position: absolute;
    background-color: #FFEBEB;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    right: 0;
}
.user-menu-content a {
    color: #333;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}
.user-menu-content a:hover {
    background-color: #FF3333;
    color: #FFFF00;
}
.user-menu:hover .user-menu-content {
    display: block;
}
.auth-buttons button {
    background-color: #FFFF00;
    color: #FF0000;
    border: none;
    padding: 8px 16px;
    margin-left: 10px;
    cursor: pointer;
    font-weight: bold;
}
.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
}
.modal-content {
    background-color: #FFEBEB;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
}
.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}
.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
.error-message {
    color: #FF0000;
    margin-top: 10px;
}
.admin-flair {
    display: inline-block;
    padding: 2px 5px;
    border-radius: 3px;
    font-size: 12px;
    font-weight: bold;
    animation: flashFlair 4s infinite;
}
@keyframes flashFlair {
    0%, 100% { background-color: #FF0000; color: #FFFF00; }
    50% { background-color: #FFFF00; color: #FF0000; }
}
.admin-controls {
    display: none;
}
.admin-tab {
    display: none;
}
</style>
</head>
<body>
<div class="header">
    <h1>Leno</h1>
    <p>A fresh social experience</p>
</div>
<div class="nav">
    <div>
        <a href="/">Home</a>
        <a href="#" id="admin-dashboard-link" style="display:none;">ADMIN DASHBOARD</a>
    </div>
    <div id="user-area">
        <!-- This area will be populated dynamically based on login status -->
    </div>
</div>
<div class="content">
    <div style="text-align: right;">
        <button class="button" onclick="location.href='/post'">Make a post</button>
        <button class="button" onclick="location.href='/contact'">Contact the admins</button>
        <button class="button" onclick="location.href='/request'">Request a community</button>
    </div>
    
    <h2>Welcome to Leno!</h2>
    <p>Join the revolution in social networking. Leno is a platform where your voice matters.</p>
    
    <div id="posts-container">
        <!-- Posts will be dynamically loaded here -->
        <p>No posts to display. Be the first to make a post!</p>
    </div>
</div>

<!-- Modal for Sign In -->
<div id="signInModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Sign In</h2>
        <form id="signInForm">
            <label for="signInUsername">Username:</label><br>
            <input type="text" id="signInUsername" name="username" required><br>
            <label for="signInPassword">Password:</label><br>
            <input type="password" id="signInPassword" name="password" required><br><br>
            <input type="submit" value="Sign In">
        </form>
        <p id="signInError" class="error-message"></p>
    </div>
</div>

<!-- Modal for Sign Up -->
<div id="signUpModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Sign Up</h2>
        <form id="signUpForm">
            <label for="signUpUsername">Username:</label><br>
            <input type="text" id="signUpUsername" name="username" required><br>
            <label for="signUpEmail">Email:</label><br>
            <input type="email" id="signUpEmail" name="email" required><br>
            <label for="signUpPassword">Password:</label><br>
            <input type="password" id="signUpPassword" name="password" required><br><br>
            <input type="submit" value="Sign Up">
        </form>
        <p id="signUpError" class="error-message"></p>
    </div>
</div>

<!-- Admin Dashboard Modal -->
<div id="adminDashboardModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Admin Dashboard</h2>
        <div id="adminTabs">
            <button onclick="showAdminTab('contentReports')">Content Reports</button>
            <button onclick="showAdminTab('communityRequests')">Community Requests</button>
            <button onclick="showAdminTab('adminMessages')">Admin Messages</button>
            <button onclick="showAdminTab('appointAdmins')">Appoint Admins</button>
        </div>
        <div id="contentReports" class="admin-tab">
            <h3>Content Reports</h3>
            <!-- Content reports will be loaded here -->
        </div>
        <div id="communityRequests" class="admin-tab">
            <h3>Community Requests</h3>
            <!-- Community requests will be loaded here -->
        </div>
        <div id="adminMessages" class="admin-tab">
            <h3>Messages to Admins</h3>
            <!-- Admin messages will be loaded here -->
        </div>
        <div id="appointAdmins" class="admin-tab">
            <h3>Appoint New Admins</h3>
            <!-- Admin appointment form will be here -->
        </div>
    </div>
</div>

<script>
let lastActivity = Date.now();
let inactivityTimeout;
let isAdmin = false;

// Simulated database
const userDatabase = [
    { username: 'Administrator', password: 'Mrmeow25', isAdmin: true, profilePicture: null },
    { username: 'user1', password: 'pass1', isAdmin: false, profilePicture: null },
    { username: 'user2', password: 'pass2', isAdmin: false, profilePicture: null }
];

function updateLastActivity() {
    lastActivity = Date.now();
    clearTimeout(inactivityTimeout);
    inactivityTimeout = setTimeout(checkInactivity, 60000); // Check every minute
}

function checkInactivity() {
    if (Date.now() - lastActivity > 900000) { // 15 minutes
        logout();
    } else {
        inactivityTimeout = setTimeout(checkInactivity, 60000);
    }
}

function logout() {
    localStorage.removeItem('user');
    updateUserArea();
}

function checkAdminStatus() {
    const user = JSON.parse(localStorage.getItem('user'));
    isAdmin = user && user.isAdmin;
    document.getElementById('admin-dashboard-link').style.display = isAdmin ? 'inline' : 'none';
}

function updateUserArea() {
    const userArea = document.getElementById('user-area');
    const user = JSON.parse(localStorage.getItem('user'));
    
    if (user) {
        let adminFlair = user.isAdmin ? '<span class="admin-flair">ADMIN</span>' : '';
        userArea.innerHTML = `
            <div class="user-menu">
                <span id="user-display">${user.username} ${adminFlair}</span>
                <div class="user-menu-content">
                    <a href="/settings">Settings</a>
                    <a href="#" onclick="logout()">Log Out</a>
                </div>
            </div>
        `;
    } else {
        userArea.innerHTML = `
            <div class="auth-buttons">
                <button onclick="openModal('signInModal')">Sign In</button>
                <button onclick="openModal('signUpModal')">Sign Up</button>
            </div>
        `;
    }
}

function openModal(modalId) {
    document.getElementById(modalId).style.display = "block";
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = "none";
}

// Close modal when clicking outside of it
window.onclick = function(event) {
    if (event.target.className === "modal") {
        event.target.style.display = "none";
    }
}

function authenticateUser(username, password) {
    return userDatabase.find(user => user.username === username && user.password === password);
}

function showAdminTab(tabName) {
    const tabs = document.getElementsByClassName('admin-tab');
    for (let i = 0; i < tabs.length; i++) {
        tabs[i].style.display = 'none';
    }
    document.getElementById(tabName).style.display = 'block';
}

document.addEventListener('DOMContentLoaded', function() {
    updateLastActivity();
    checkAdminStatus();
    updateUserArea();

    // Set up event listeners for modal close buttons
    let closeButtons = document.getElementsByClassName("close");
    for (let i = 0; i < closeButtons.length; i++) {
        closeButtons[i].onclick = function() {
            closeModal(this.closest('.modal').id);
        }
    }

    // Set up form submission handlers
    document.getElementById('signInForm').onsubmit = function(e) {
        e.preventDefault();
        const username = document.getElementById('signInUsername').value;
        const password = document.getElementById('signInPassword').value;
        const user = authenticateUser(username, password);
        if (user) {
            localStorage.setItem('user', JSON.stringify(user));
            closeModal('signInModal');
            updateUserArea();
            checkAdminStatus();
        } else {
            document.getElementById('signInError').textContent = 'Invalid username or password';
        }
    }

    document.getElementById('signUpForm').onsubmit = function(e) {
        e.preventDefault();
        const username = document.getElementById('signUpUsername').value;
        const email = document.getElementById('signUpEmail').value;
        const password = document.getElementById('signUpPassword').value;
        if (userDatabase.some(user => user.username === username)) {
            document.getElementById('signUpError').textContent = 'Username already exists';
        } else {
            const newUser = { username, password, isAdmin: false, profilePicture: null };
            userDatabase.push(newUser);
            localStorage.setItem('user', JSON.stringify(newUser));
            closeModal('signUpModal');
            updateUserArea();
            checkAdminStatus();
        }
    }

    document.getElementById('admin-dashboard-link').onclick = function(e) {
        e.preventDefault();
        if (isAdmin) {
            openModal('adminDashboardModal');
            showAdminTab('contentReports');
        }
    }
});

document.addEventListener('mousemove', updateLastActivity);
document.addEventListener('keypress', updateLastActivity);

window.addEventListener('beforeunload', logout);
</script>
</body></html>